---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';

interface Props {
    item: CollectionEntry<'apps' | 'persons' | 'companies'>;
    collection: 'apps' | 'persons' | 'companies';
}

const { item, collection } = Astro.props;

const href = `/${collection}/${item.slug}`;
---

<a
    href={href}
    class="group block p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-400 dark:hover:border-primary-600 hover:shadow-md dark:hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-800"
>
    <div class="space-y-2">
        <Image
            class="aspect-square object-cover transition-transform duration-300 group-hover:scale-105"
            src={item.data.logo}
            alt={item.data.title}
            format="webp"
            widths={[140, 160, 180, 200, 220]}
            aspectRatio="1/1"
            sizes="(min-width:1024px) 200px, (min-width:640px) 180px, 160px"
        />

        <h4
            class="text-xs font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors"
        >
            {item.data.title}
        </h4>

        {
            item.data.tags.length > 0 && (
                <div class="flex flex-wrap gap-1">
                    {item.data.tags.slice(0, 2).map((tag: string) => (
                        <span class="text-xs px-2 py-0.5 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300">
                            {tag}
                        </span>
                    ))}
                    {item.data.tag.length > 2 && (
                        <span class="text-xs px-2 py-0.5 text-gray-500 dark:text-gray-400">
                            +{item.data.tags.length - 2}
                        </span>
                    )}
                </div>
            )
        }
    </div>
</a>
