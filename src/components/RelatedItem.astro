---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import { resolveLogo } from '../utils/imageResolvers.ts';

interface Props {
    item: CollectionEntry<'apps' | 'persons' | 'companies'>;
    collection: 'apps' | 'persons' | 'companies';
    resolved?: Record<string, CollectionEntry<'persons'>>;
}

const { item, collection } = Astro.props;

const href = `/${collection}/${item.slug}`;
const resolvedImage = resolveLogo(item.slug, item.data.logo);
---

<a
    href={href}
    class="w-24 h-30 group block m-2 p-3 overflow-hidden rounded-lg hover:scale-95 shadow-xl shadow-primary-200 dark:shadow-primary-800/50 hover:shadow-primary-400/50 dark:hover:shadow-primary-900/50 transition-all duration-200"
>
    <div class="space-y-2 pt-3 flex flex-col items-center justify-center">
        <div class="rounded-xl">
            <div class="w-12 h-12 flex-shrink-0 rounded-lg overflow-hidden">
                <Image
                    class="w-full h-full object-contain"
                    src={resolvedImage}
                    alt={item.data.title}
                    loading="eager"
                    format="webp"
                />
            </div>
        </div>

        <h4
            class="text-xs font-small text-gray-900 dark:text-gray-100 line-clamp-2 transition-colors line-clamp-2"
        >
            {item.data.title}
        </h4>
    </div>
</a>
