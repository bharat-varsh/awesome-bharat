---
import { Image } from 'astro:assets';
import { resolveLogo } from '../utils/imageResolvers.ts';
import type { ImageMetadata } from 'astro';

export interface Props {
    title: string;
    href: string;
    image?: string;
    slug: string;
    tags?: string[];
    class?: string;
}

const { title, href, image, slug, tags, class: extraClass = '' } = Astro.props;
const resolvedImage = resolveLogo(slug, image) as ImageMetadata;
---

<a
    href={href}
    class={`group flex-shrink-0 w-[60px] sm:w-[80px] md:w-[100px] lg:w-[120px] ${extraClass}`}
>
    <div class="rounded-xl p-1">
        <div class="rounded-lg overflow-hidden">
            <Image
                class="aspect-square object-cover transition-transform duration-300 group-hover:scale-105"
                src={resolvedImage}
                alt={title}
                format="webp"
                widths={[60, 80, 100, 120, 140]}
                aspectRatio="1/1"
                sizes="(min-width:1024px) 120px, (min-width:640px) 100px, 80px"
            />
        </div>
    </div>

    <div class="mt-2 px-1 text-left">
        <h3 class="text-sm font-semibold leading-snug line-clamp-2">
            {title}
        </h3>
        {tags?.[0] && <p class="text-xs text-gray-500 dark:text-gray-400 mt-0.5">{tags[0]}</p>}
    </div>
</a>
