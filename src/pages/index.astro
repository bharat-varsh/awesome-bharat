---
/**
 * Homepage – Main landing page
 */

import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';
import ContentCard from '@components/ContentCard.astro';

const apps = (await getCollection('apps')) as Array<CollectionEntry<'apps'>>;

const latestApps = apps
    .filter((app) => !app.data.draft)
    .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
    .slice(0, 20);
---

<BaseLayout
    title="Home | Awesome Bharat"
    description="A curated collection of awesome made by Indians!"
>
    <!-- Hero -->
    <section
        class="py-12 bg-gradient-to-b from-primary-50 to-white dark:from-gray-900 dark:to-gray-900"
    >
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h1 class="font-bold tracking-tight mb-6">
                <!-- Desktop -->
                <span class="hidden md:block text-5xl lg:text-6xl">
                    Welcome to
                    <span class="text-primary-600 dark:text-primary-400">[ Awesome ]</span>
                    Bharat
                </span>

                <!-- Mobile -->
                <span class="block md:hidden text-4xl leading-tight">
                    <span class="block">Welcome</span>
                    <span class="block">to</span>
                    <span class="block text-primary-600 dark:text-primary-400">[ Awesome ]</span>
                    <span class="block">Bharat</span>
                </span>
            </h1>

            <p class="text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
                A curated collection of awesome made by Indians! Discover your inspiration and the
                great people who made that possible!
            </p>
        </div>
    </section>

    <!-- Latest Apps -->
    <section class="py-12 bg-white dark:bg-gray-900">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold">Latest Apps</h2>
                <a href="/apps" class="text-sm font-medium text-primary-600 dark:text-primary-400">
                    View all
                </a>
            </div>

            <!-- Horizontal scroll row -->
            <div class="relative">
                <!-- Left arrow -->
                <button
                    aria-label="Scroll left"
                    class="hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 z-10
                 h-9 w-9 rounded-full bg-gray-900/70 hover:bg-gray-900
                 text-white items-center justify-center"
                    onclick="this.nextElementSibling.scrollBy({ left: -320, behavior: 'smooth' })"
                >
                    ‹
                </button>

                <!-- Scroll container -->
                <div
                    class="flex gap-5 overflow-x-auto scroll-smooth pb-2
                 snap-x snap-mandatory
                 px-10 md:px-12 scrollbar-hide"
                >
                    {
                        latestApps.map((app) => (
                            <ContentCard
                                title={app.data.title}
                                href={`/apps/${app.slug}`}
                                image={app.data.coverImage}
                                slug={app.slug}
                                tags={app.data.tags}
                                class="snap-start"
                            />
                        ))
                    }
                </div>

                <!-- Right arrow -->
                <button
                    aria-label="Scroll right"
                    class="hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 z-10
                 h-9 w-9 rounded-full bg-gray-900/70 hover:bg-gray-900
                 text-white items-center justify-center"
                    onclick="this.previousElementSibling.scrollBy({ left: 320, behavior: 'smooth' })"
                >
                    ›
                </button>
            </div>

            <!-- CTA -->
            <div class="mt-10 text-center">
                <a
                    href="/apps"
                    class="inline-block px-8 py-3 rounded-lg
                 bg-primary-600 text-white font-medium
                 hover:bg-primary-700 transition-colors"
                >
                    Explore everything
                </a>
            </div>
        </div>
    </section>
</BaseLayout>
