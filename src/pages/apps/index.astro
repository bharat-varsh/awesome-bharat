---
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';
import ContentCard from '@components/ContentCard.astro';

const apps = (await getCollection('apps')) as Array<CollectionEntry<'apps'>>;
const visibleApps = apps
    .filter(app => !app.data.draft)
    .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
---

<BaseLayout
    title="Apps | Awesome Bharat"
    description="A curated collection of awesome apps made by Indians! Discover your favorite apps and the great people who made them!"
>
    <div class="max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8">
        <header class="mb-12">
            <h1 class="text-4xl font-bold mb-4">Apps</h1>
            <p class="text-xl text-gray-600 dark:text-gray-400">
                Amazing apps made by Indians, with love, for the globe
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grr-cols-3 gap-8">
            {visibleApps.map((app) => (
                <ContentCard
                    title={app.data.title}
                    description={app.data.description}
                    href={`/apps/${app.slug}`}
                    date={app.data.date}
                    tags={app.data.tags}
                    image={app.data.coverImage}
                />
            ))}
        </div>

        {visibleApps.length === 0 && (
            <div class="text-center py-12">
                <p class="text-gray-600 dark:text-gray-400">No apps yet. Check back soon!</p>
            </div>
        )}
    </div>
</BaseLayout>
